// advanced video options menu
menudef AdvRenderOptions {
  Title = "ADVANCED RENDER OPTIONS";


  header "Render Portals Options";

  option bool {
    title = "Allow horizons";
    cvar = r_allow_horizons;
    help =
      "Allow rendering horizon portals?"
      "Please note that you have to restart/reload level after changing this,"
      "or visual glitches will occur.";
  }

  option bool {
    title = "Allow mirrors";
    cvar = r_allow_mirrors;
    help =
      "Allow rendering mirror portals?"
      "Note that portal rendering in k8VaVoom is somewhat slow."
      "Please note that you have to restart/reload level after changing this,"
      "or visual glitches will occur.";
  }

  option bool [__k8vavoom_developer_version > 0] {
    title = "Allow other portals";
    cvar = r_allow_other_portals;
    help =
      "Allow rendering non-mirror portals?"
      "This is mostly for stacked sectors and other such things."
      "Currently this is *VERY* glitchy, so you'd better don't turn this on."
      "Please note that you have to restart/reload level after changing this,"
      "or visual glitches will occur.";
  }

  option numeric {
    title = "Maximum mirror depth";
    cvar = r_maxmirrors;
    step = 1;
    min = 0;
    max = 6;
    help =
      "Maximum allowed mirror depth."
      "Usually has little effect.";
  }

  option numeric {
    title = "Maximum portal depth";
    cvar = r_max_portal_depth;
    step = 1;
    min = -1;
    max = 16;
    help =
      "Maximum allowed portal depth."
      "Usually has huge effect on levels with mirrors."
      "If you suddenly see FPS below 30 in some level places,"
      "this is probably due portals. Try to decrease this, or"
      "turn mirrors off, or turn this off."
      "-1 means 'infinite portal depth'.";
  }


  header "Stencil Shadows Options";

  option bool {
    title = "Allow Static Lighting";
    cvar = r_static_lights;
    help = "Process static lights?";
  }

  option numeric {
    title = "Maximum Lights";
    cvar = r_max_lights;
    step = 1;
    min = -1;
    max = 256;
    help =
      "Maximum allowed light sources (-1 means unlimited)."
      "This is hard limit for light sources in one frame.";
  }

  option numeric {
    title = "Maximum Total Lit Subsectors";
    cvar = r_max_light_segs_all;
    step = 1;
    min = -1;
    max = 1024;
    help =
      "Maximum allowed lit surfaces (-1 means unlimited)."
      "This limits total number of rendered light surfaces."
      "There is little reason to limit this, as it is usually"
      "has very low performance hit.";
  }

  option numeric {
    title = "Maximum Single Lit Subsectors";
    cvar = r_max_light_segs_one;
    step = 1;
    min = -1;
    max = 1024;
    help =
      "Maximum allowed lit surfaces for one light (-1 means unlimited)."
      "This limits number of rendered light surfaces per one light."
      "There is little reason to limit this, as it is usually"
      "has very low performance hit.";
  }

  option numeric {
    title = "Maximum Total Shadow Volumes";
    cvar = r_max_shadow_segs_all;
    step = 1;
    min = -1;
    max = 1024;
    help =
      "Maximum allowed shadow volumes (-1 means unlimited)."
      "This limits total number of rendered shadow volumes."
      "This is what causes most slowdowns. Decrease this to"
      "make rendering faster (but with less proper shadows)."
      "Note that nearby static lights are rendered first,"
      "so even with low numbers this will look somewhat good.";
  }

  option numeric {
    title = "Maximum Single Shadow Volumes";
    cvar = r_max_shadow_segs_one;
    step = 1;
    min = -1;
    max = 1024;
    help =
      "Maximum allowed shadow volumes for one light (-1 means unlimited)."
      "There is little reason to change this.";
  }

  option bool {
    title = "Shadow Check";
    cvar = r_advlight_opt_trace;
    help =
      "Check if dynamic light can cast shadow."
      "This can speedup rendering (lightmapped too),"
      "so better leave this 'ON'.";
  }

  option bool {
    title = "Use Scissoring";
    cvar = r_advlight_opt_scissor;
    help =
      "Limit light screen update area by light box projection."
      "There is no reason to turn this off, ever. But if you"
      "want to enjoy a slideshow, you can do it.";
  }

  option bool {
    title = "Optimise scissor";
    cvar = r_advlight_opt_optimise_scissor;
    help =
      "Optimise light scissor with actual geometry."
      "If lit geometry bounds is less than the actual light scissor,"
      "there is no need to render anything more.";
  }

  option bool {
    title = "Use Depth Bounding";
    cvar = gl_enable_depth_bounds;
    help =
      "Limit z by the actual light radius, if your GPU can do it."
      "This can buy you some FPS by reducing fill rate.";
  }


  header "DEBUG Stencil Shadows Options";

  option bool {
    title = "Use quad-clear for stencil";
    cvar = gl_use_stencil_quad_clear;
    help =
      "Clear stencil buffer with rendered quad instead of 'glClear()'?"
      "On most (if not all) GPUS it is faster to use 'glClear()`,"
      "but you can check if this will give you any speedup.";
  }

  option bool {
    title = "Render Surface Textures";
    textColor = BRICK;
    cvar = gl_dbg_adv_render_textures_surface;
    help = "Turn this off to see ambient lighting without textures.";
  }
}
